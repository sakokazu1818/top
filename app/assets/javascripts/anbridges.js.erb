function particles() {
  particlesJS('index-background',
    {
      "particles": {
        "number": {
          "value": 80,
          "density": {
            "enable": true,
            "value_area": 800
          }
        },
        "color": {
          "value": "#ffffff"
        },
        "shape": {
          "type": "circle",
          "stroke": {
            "width": 0,
            "color": "#000000"
          },
        },
        "opacity": {
          "value": 0.5,
          "random": false,
          "anim": {
            "enable": false,
            "speed": 1,
            "opacity_min": 0.1,
            "sync": false
          }
        },
        "size": {
          "value": 5,
          "random": true,
          "anim": {
            "enable": false,
            "speed": 40,
            "size_min": 0.1,
            "sync": false
          }
        },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#ffffff",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 6,
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "attract": {
            "enable": false,
            "rotateX": 600,
            "rotateY": 1200
          }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {
            "enable": false,
            "mode": "repulse"
          },
          "onclick": {
            "enable": false,
            "mode": "push"
          },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 400,
            "line_linked": {
              "opacity": 1
            }
          },
          "bubble": {
            "distance": 400,
            "size": 40,
            "duration": 2,
            "opacity": 8,
            "speed": 3
          },
          "repulse": {
            "distance": 200
          },
          "push": {
            "particles_nb": 4
          },
          "remove": {
            "particles_nb": 2
          }
        }
      },
      "retina_detect": true,
      "config_demo": {
        "hide_card": false,
        "background_color": "#b61924",
        "background_image": "",
        "background_position": "50% 50%",
        "background_repeat": "no-repeat",
        "background_size": "cover"
      }
    }
  );
}

function showPage() {
  $('#loader-bg').delay(900).fadeOut(800);
  $('#loader').hide();
  textEffect();
}

function textEffect() {
  $('.js-text-1').textillate({
      initialDelay: 500,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-2').textillate({
      initialDelay: 700,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-3').textillate({
      initialDelay: 900,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-4').textillate({
      initialDelay: 700,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });
}

  // 住所
  // let location = { lat: 35.703315, lng: 139.755527 };
  // let map = new google.maps.Map(document.getElementById('map'), { zoom: 15, center: location });

  //google mapsインスタンス化
  // let transitLayer = new google.maps.TransitLayer();
  // transitLayer.setMap(map);

  // マーカーを押したときにポップアップで出る情報
  // let contentString = '住所：東京都文京区本郷1-4-4 水道橋ビル6階';
  // let infowindow = new google.maps.InfoWindow({content: contentString});

  //マーカーの実体を作る
  // let marker = new google.maps.Marker({position:location,map: map,title: contentString});

  //マーカーをクリックできるようにする
  // marker.addListener('click', function() {
  //   infowindow.open(map, marker);
  // });

  // contents();


function setSpHeder() {
  $("#hamburger-menu-item").hide();

  $('.hamburger-menu').on('click', function() {
    $("#hamburger-menu-item").show( 'slide', { direction: 'right' } , 1000 );
    $('#menu-bg').css('visibility', 'visible');
  });

  $('#menu-bg').on('click', function() {
    $('#menu-bg').css('visibility', 'hidden');
    $("#hamburger-menu-item").hide( 'slide', { direction: 'right' } , 1000 );
  });
}

function loader() {
  $('#loader-bg, #loader').height($(window).height()+100).css('display','block');
  $('.loading').textillate({
      loop: true,
      minDisplayTime: 1000,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounce',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      },

      // アニメーション設定(終了)
      out: {
        effect: 'bounce',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });
}

// メイン処理
$(document).on('turbolinks:load', function() {
  loader();
  let $anbridges = $('#anbridges');
  let $navItem = $($anbridges.find('.navbar-nav')[1]).find('.nav-item');

  if ($anbridges.length == 0) {
    $anbridges = $('#anbridges_smart_phone');
    setSpHeder();
    setTimeout(showPage, 2000);
  } else {
    switch (location.pathname) {
      case '/company':
        $($navItem[1]).addClass('active');
        setTimeout(showPage, 2000);
        break;
      case '/misson':
        $($navItem[2]).addClass('active');
        setTimeout(showPage, 2000);
        break;
      case '/business':
        $($navItem[3]).addClass('active');
        setTimeout(showPage, 2000);
        // TODO
        break;
      case '/graduate':
        $($navItem[4]).addClass('active');
        setTimeout(showPage, 2000);
        // TODO
        break;
      default:
        let video = document.querySelector('video');
        $($navItem[0]).addClass('active');

        video.oncanplaythrough = function() {
          particles();
          showPage();
        }
        break;
    }
  }
});

// function contents() {
//   var width, height;
//   $('.card').hover(function() {
//     var zoom = 1.2;
//     var $img = $(this).find('img');
//
//     if (width == null) {
//       width = $img.width();
//       height = $img.height();
//     }
//
//     //画像を拡大
//     $img.stop(false,true).animate(
//       {'width': width * zoom, 'height': height * zoom},
//       {duration: 300}
//     );
//   },
//   function() {
//     //画像リセット
//     $(this).find('img').stop(false,true).animate(
//       {'width': width, 'height': height},
//       {duration: 300}
//     );
//   });
// }
