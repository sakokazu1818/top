function showPage() {
  let $anbridges = $('#anbridges');

  if ($anbridges.length == 0) {
    $anbridges = $('#anbridges_smart_phone');
  }

  if ($anbridges.length == 0) {
    return false;
  }

  $('#loader-bg').delay(900).fadeOut(800);
  $('#loader').hide();
  $anbridges.show();

  $('.js-text-1').textillate({
      initialDelay: 500,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-2').textillate({
      initialDelay: 700,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-3').textillate({
      initialDelay: 900,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  $('.js-text-4').textillate({
      initialDelay: 700,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounceInRight',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });
}

function contents() {
  var width, height;
  $('.card').hover(function() {
    var zoom = 1.2;
    var $img = $(this).find('img');

    if (width == null) {
      width = $img.width();
      height = $img.height();
    }

    //画像を拡大
    $img.stop(false,true).animate(
      {'width': width * zoom, 'height': height * zoom},
      {duration: 300}
    );
  },
  function() {
    //画像リセット
    $(this).find('img').stop(false,true).animate(
      {'width': width, 'height': height},
      {duration: 300}
    );
  });
}

$(document).on('turbolinks:load', function() {
  $('.loading').textillate({
      loop: true,
      minDisplayTime: 1000,
      autoStart: true,

      // アニメーション設定(開始)
      in: {
        effect: 'bounce',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      },

      // アニメーション設定(終了)
      out: {
        effect: 'bounce',
        delayScale: 3,
        delay: 50,
        sync: false,
        shuffle: false
      }
  });

  let $anbridges = $('#anbridges');

  if ($anbridges.length == 0) {
    $anbridges = $('#anbridges_smart_phone');
  }

  if ($anbridges.length == 0) {
    return false;
  }

  $anbridges.hide();

  $('#loader-bg, #loader').height($(window).height()).css('display','block');

  // 住所
  let location = { lat: 35.703315, lng: 139.755527 };
  let map = new google.maps.Map(document.getElementById('map'), { zoom: 15, center: location });

  //google mapsインスタンス化
  let transitLayer = new google.maps.TransitLayer();
  transitLayer.setMap(map);

  // マーカーを押したときにポップアップで出る情報
  let contentString = '住所：東京都文京区本郷1-4-4 水道橋ビル6階';
  let infowindow = new google.maps.InfoWindow({content: contentString});

  //マーカーの実体を作る
  let marker = new google.maps.Marker({position:location,map: map,title: contentString});

  //マーカーをクリックできるようにする
  marker.addListener('click', function() {
    infowindow.open(map, marker);
  });

  let video = document.querySelector('video')

  if (video != null) {
    video.oncanplaythrough = function(){
      setTimeout(showPage, 2000);
    }
  }

  $('.nav-item').on('click', function() {
    $anbridges.hide();
  });

  $("#hamburger-menu-item").hide();

  $('.hamburger-menu').on('click', function() {
    $("#hamburger-menu-item").show( 'slide', { direction: 'right' } , 1000 );
    $('#menu-bg').css('visibility', 'visible');
  });

  $('#menu-bg').on('click', function() {
    $('#menu-bg').css('visibility', 'hidden');
    $("#hamburger-menu-item").hide( 'slide', { direction: 'right' } , 1000 );
  });

  contents();
})

$(window).on('turbolinks:load', function() {
  if (document.querySelector('video') != null) {
    return false;
  }

  setTimeout(showPage, 2000);
});
