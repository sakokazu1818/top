function showPage() {
  let $anbridges = $('#anbridges');

  if ($anbridges.length == 0) {
    $anbridges = $('#anbridges_smart_phone');
  }

  if ($anbridges.length == 0) {
    return false;
  }

  $('#loader-bg').delay(900).fadeOut(800);
  $('#loader').hide();
  $anbridges.show();
}

$(document).on('turbolinks:load', function() {
  let $anbridges = $('#anbridges');

  if ($anbridges.length == 0) {
    $anbridges = $('#anbridges_smart_phone');
  }

  if ($anbridges.length == 0) {
    return false;
  }

  $anbridges.hide();

  $('#loader-bg, #loader').height($(window).height()).css('display','block');

  // 住所
  let location = { lat: 35.703315, lng: 139.755527 };
  let map = new google.maps.Map(document.getElementById('map'), { zoom: 15, center: location });

  //google mapsインスタンス化
  let transitLayer = new google.maps.TransitLayer();
  transitLayer.setMap(map);

  // マーカーを押したときにポップアップで出る情報
  let contentString = '住所：東京都文京区本郷1-4-4 水道橋ビル6階';
  let infowindow = new google.maps.InfoWindow({content: contentString});

  //マーカーの実体を作る
  let marker = new google.maps.Marker({position:location,map: map,title: contentString});

  //マーカーをクリックできるようにする
  marker.addListener('click', function() {
    infowindow.open(map, marker);
  });

  let video = document.querySelector('video')

  if (video != null) {
    video.oncanplay = function(){
      setTimeout(showPage, 2000);
    }
  }

  $('.nav-item').on('click', function() {
    $anbridges.hide();
  });

  $("#hamburger-menu-item").hide();

  $('.hamburger-menu').on('click', function() {
    $("#hamburger-menu-item").show( 'slide', { direction: 'right' } , 1000 );
    $('#menu-bg').css('visibility', 'visible');
  });

  $('#menu-bg').on('click', function() {
    $('#menu-bg').css('visibility', 'hidden');
    $("#hamburger-menu-item").hide( 'slide', { direction: 'right' } , 1000 );
  });
})

$(window).on('turbolinks:load', function() {
  if (document.querySelector('video') != null) {
    return false;
  }

  setTimeout(showPage, 2000);
});
